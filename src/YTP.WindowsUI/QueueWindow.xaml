<ui:FluentWindow x:Class="YTP.WindowsUI.QueueWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    xmlns:local="clr-namespace:YTP.WindowsUI"
    Title="Queue" Height="500" Width="420" WindowStyle="None" AllowsTransparency="False" ShowInTaskbar="False">
    <Grid Margin="8">
    <TreeView x:Name="QueueTree" ItemsSource="{Binding}" VirtualizingStackPanel.IsVirtualizing="True" AllowDrop="True"
          PreviewMouseLeftButtonDown="TreeView_PreviewMouseLeftButtonDown" Drop="TreeView_Drop" DragOver="TreeView_DragOver">
            <TreeView.ItemContainerStyle>
                <Style TargetType="TreeViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                </Style>
            </TreeView.ItemContainerStyle>
            <TreeView.Resources>
                <HierarchicalDataTemplate DataType="{x:Type local:PlaylistNode}" ItemsSource="{Binding Items}">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Title}" FontWeight="SemiBold" />
                        <TextBlock Text=" (" Foreground="Gray" />
                        <TextBlock Text="{Binding Items.Count}" Foreground="Gray" />
                        <TextBlock Text=")" Foreground="Gray" />
                    </StackPanel>
                </HierarchicalDataTemplate>

                <DataTemplate DataType="{x:Type local:QueueItemNode}">
                    <Grid Margin="0,2,0,2" HorizontalAlignment="Stretch">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Orientation="Vertical" HorizontalAlignment="Stretch">
                            <TextBlock Text="{Binding DisplayTitle}" FontWeight="SemiBold" TextTrimming="CharacterEllipsis" />
                            <TextBlock Text="{Binding Subtitle}" FontSize="11" Foreground="Gray" TextTrimming="CharacterEllipsis" />
                        </StackPanel>
                        <!-- Right-edge actions: fixed container so buttons hug the right edge -->
                        <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right" Width="80">
                            <Button Width="26" Height="24" Margin="2" Padding="0" ToolTip="Pause/Resume" Click="Pause_Click">
                                <ui:SymbolIcon Symbol="{Binding IconSymbol}" />
                            </Button>
                            <Button Width="26" Height="24" Margin="2" Padding="0" ToolTip="Remove" Click="Remove_Click">
                                <ui:SymbolIcon Symbol="SubtractCircle20" />
                            </Button>
                        </StackPanel>
                    </Grid>
                </DataTemplate>
            </TreeView.Resources>
        </TreeView>
    </Grid>
</ui:FluentWindow>
